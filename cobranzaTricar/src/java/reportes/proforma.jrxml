<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="proforma" language="groovy" pageWidth="595" pageHeight="842" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20">
	<parameter name="codigo" class="java.lang.String">
		<parameterDescription><![CDATA[]]></parameterDescription>
		<defaultValueExpression><![CDATA[""]]></defaultValueExpression>
	</parameter>
	<parameter name="SUBREPORT_DIR" class="java.lang.String" isForPrompting="false">
		<defaultValueExpression><![CDATA["H:\\Disco D\\todo_sistema\\drivers_todo\\"]]></defaultValueExpression>
	</parameter>
	<queryString>
		<![CDATA[SELECT
     credito."liqventa" AS credito_liqventa,
     cliente."nombre" AS anexo_nombre,
     credito."nletras" AS credito_nletras,
     credito."vehi" AS credito_vehi,
     credito."interes" AS credito_interes,
     credito."saldo" AS credito_saldo,
     credito."inicial" AS credito_inicial,
     credito."precio" AS credito_precio,
     credito."fechareg" AS credito_fechareg,
     letras."montoletra" AS letras_montoletra,
     letras."fecini" AS letras_fecini,
     letras."fecven" AS letras_fecven,
     letras."monto" AS letras_monto,
     letras."interes" AS letras_interes,
     cliente."direccion" AS anexo_direccion,
     credito."idventa" AS credito_idventa,
     cliente."apepat" AS anexo_apepat,
     cliente."apemat" AS anexo_apemat,
	 vendedor."nombre" AS codven_anexo

FROM
     "dbo"."anexo" cliente INNER JOIN "dbo"."credito" credito ON cliente."idanexo" = credito."idanexo"
     INNER JOIN "dbo"."letras" letras ON credito."idventa" = letras."idventa"
     INNER JOIN "dbo"."anexo" vendedor ON credito."codven" = vendedor."idanexo"
	 
WHERE
     liqventa = $P{codigo}]]>
	</queryString>
	<field name="credito_liqventa" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="anexo_nombre" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="credito_nletras" class="java.lang.Integer">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="credito_vehi" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="credito_interes" class="java.math.BigDecimal">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="credito_saldo" class="java.math.BigDecimal">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="credito_inicial" class="java.math.BigDecimal">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="credito_precio" class="java.math.BigDecimal">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="credito_fechareg" class="java.sql.Timestamp">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="letras_montoletra" class="java.math.BigDecimal">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="letras_fecini" class="java.sql.Timestamp">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="letras_fecven" class="java.sql.Timestamp">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="letras_monto" class="java.math.BigDecimal">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="letras_interes" class="java.math.BigDecimal">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="anexo_direccion" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="credito_idventa" class="java.lang.Integer">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="anexo_apepat" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="anexo_apemat" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="codven_anexo" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<variable name="nombres" class="java.lang.String" calculation="Sum">
		<variableExpression><![CDATA[$F{anexo_nombre}+" "+$F{anexo_apepat}+" "+$F{anexo_apemat}]]></variableExpression>
	</variable>
	<variable name="total" class="java.lang.Number">
		<variableExpression><![CDATA[$F{letras_monto}*$F{credito_nletras}]]></variableExpression>
	</variable>
	<title>
		<band height="233" splitType="Stretch">
			<rectangle>
				<reportElement x="286" y="68" width="269" height="75"/>
			</rectangle>
			<textField>
				<reportElement x="260" y="16" width="93" height="20"/>
				<textElement textAlignment="Justified" verticalAlignment="Middle"/>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{credito_liqventa}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="308" y="118" width="61" height="20"/>
				<textElement textAlignment="Justified" verticalAlignment="Middle"/>
				<text><![CDATA[VEHICULO:]]></text>
			</staticText>
			<textField>
				<reportElement x="369" y="78" width="150" height="20"/>
				<textElement textAlignment="Justified" verticalAlignment="Middle"/>
				<textFieldExpression class="java.lang.String"><![CDATA[$V{nombres}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="308" y="78" width="49" height="20"/>
				<textElement textAlignment="Justified" verticalAlignment="Middle"/>
				<text><![CDATA[CLIENTE:]]></text>
			</staticText>
			<textField>
				<reportElement x="369" y="98" width="56" height="20"/>
				<textElement textAlignment="Justified" verticalAlignment="Middle"/>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{credito_fechareg}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="308" y="98" width="49" height="20"/>
				<textElement textAlignment="Justified" verticalAlignment="Middle"/>
				<text><![CDATA[FECHA:]]></text>
			</staticText>
			<rectangle>
				<reportElement x="0" y="153" width="555" height="63"/>
			</rectangle>
			<staticText>
				<reportElement x="12" y="163" width="64" height="20"/>
				<textElement textAlignment="Justified" verticalAlignment="Middle"/>
				<text><![CDATA[PRECIO:]]></text>
			</staticText>
			<textField>
				<reportElement x="76" y="163" width="100" height="20"/>
				<textElement textAlignment="Justified" verticalAlignment="Middle"/>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{credito_precio}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="196" y="163" width="64" height="20"/>
				<textElement textAlignment="Justified" verticalAlignment="Middle"/>
				<text><![CDATA[INICIAL:]]></text>
			</staticText>
			<textField>
				<reportElement x="369" y="118" width="56" height="20"/>
				<textElement textAlignment="Justified" verticalAlignment="Middle"/>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{credito_vehi}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="381" y="163" width="64" height="20"/>
				<textElement textAlignment="Justified" verticalAlignment="Middle"/>
				<text><![CDATA[SALDO:]]></text>
			</staticText>
			<staticText>
				<reportElement x="13" y="191" width="64" height="20"/>
				<textElement textAlignment="Justified" verticalAlignment="Middle"/>
				<text><![CDATA[INTERES:]]></text>
			</staticText>
			<staticText>
				<reportElement x="196" y="191" width="64" height="20"/>
				<textElement verticalAlignment="Middle"/>
				<text><![CDATA[LETRAS:]]></text>
			</staticText>
			<textField>
				<reportElement x="260" y="163" width="100" height="20"/>
				<textElement textAlignment="Justified" verticalAlignment="Middle"/>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{credito_inicial}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="445" y="163" width="100" height="20"/>
				<textElement textAlignment="Justified" verticalAlignment="Middle"/>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{credito_saldo}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="77" y="191" width="8" height="20"/>
				<textElement textAlignment="Justified" verticalAlignment="Middle"/>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{credito_interes}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="260" y="191" width="43" height="20"/>
				<textElement textAlignment="Justified" verticalAlignment="Middle"/>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{credito_nletras}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="93" y="191" width="12" height="20"/>
				<textElement textAlignment="Justified" verticalAlignment="Middle">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[%]]></text>
			</staticText>
			<image>
				<reportElement x="369" y="0" width="181" height="50"/>
				<imageExpression class="java.lang.String"><![CDATA["D:\\LOGO VELOREX.jpg"]]></imageExpression>
			</image>
			<image>
				<reportElement x="0" y="3" width="196" height="50"/>
				<imageExpression class="java.lang.String"><![CDATA["D:\\LOGO TRICAR.png"]]></imageExpression>
			</image>
			<staticText>
				<reportElement x="425" y="118" width="61" height="20"/>
				<textElement textAlignment="Justified" verticalAlignment="Middle"/>
				<text><![CDATA[MODELO:]]></text>
			</staticText>
			<line>
				<reportElement x="472" y="134" width="58" height="1"/>
			</line>
			<staticText>
				<reportElement x="196" y="16" width="64" height="20"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font isBold="true" isUnderline="true"/>
				</textElement>
				<text><![CDATA[PROFORMA]]></text>
			</staticText>
			<staticText>
				<reportElement x="13" y="68" width="72" height="20"/>
				<textElement textAlignment="Justified" verticalAlignment="Middle"/>
				<text><![CDATA[VENDEDOR:]]></text>
			</staticText>
			<textField>
				<reportElement x="85" y="68" width="93" height="20"/>
				<textElement textAlignment="Justified" verticalAlignment="Middle"/>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{codven_anexo}]]></textFieldExpression>
			</textField>
		</band>
	</title>
	<summary>
		<band height="199" splitType="Stretch">
			<subreport>
				<reportElement x="0" y="0" width="555" height="42"/>
				<subreportParameter name="codigo">
					<subreportParameterExpression><![CDATA[$F{credito_idventa}]]></subreportParameterExpression>
				</subreportParameter>
				<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
				<subreportExpression class="java.lang.String"><![CDATA[$P{SUBREPORT_DIR} + "letras_sub.jasper"]]></subreportExpression>
			</subreport>
			<rectangle>
				<reportElement x="0" y="170" width="274" height="29"/>
			</rectangle>
			<staticText>
				<reportElement x="0" y="170" width="274" height="29"/>
				<textElement textAlignment="Justified" verticalAlignment="Middle"/>
				<text><![CDATA[Gracias por su preferencia, validez de la proforma 07 dÃ­as.]]></text>
			</staticText>
			<staticText>
				<reportElement x="396" y="179" width="42" height="20"/>
				<textElement textAlignment="Justified" verticalAlignment="Middle">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[TOTAL:]]></text>
			</staticText>
			<textField>
				<reportElement x="456" y="179" width="68" height="20"/>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font size="11" isBold="true"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$V{total}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="437" y="179" width="20" height="20"/>
				<textElement textAlignment="Justified" verticalAlignment="Middle">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[S/.]]></text>
			</staticText>
		</band>
	</summary>
</jasperReport>
